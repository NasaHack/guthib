import{g as r}from"./chunk-SMNQRYQ3.mjs";import{a as s,b as o,c as i}from"./chunk-3MI3D35U.mjs";var a=class{constructor(){this.handleTimeOut=e=>{let t=new AbortController,n=setTimeout(()=>{t.abort(),clearTimeout(n)},(e==null?void 0:e.timeout)||5e3);return t};this.normalizedReqOptions=e=>{let t=o(s({},e),{signal:this.handleTimeOut(e).signal});return t.baseURL&&delete t.baseURL,t.methods&&delete t.methods,t.timeout&&delete t.timeout,t.query&&delete t.query,t.resultProps&&delete t.resultProps,t};this.parseData=e=>i(this,null,function*(){let t=e.headers.get("Content-Type");if(!t)return`Unable to detect Content-Type. 
 Consider using 'proah.extra()' to handle this manually.`;if(t.startsWith("application/json"))try{return yield e.json()}catch(n){return`Failed to parse JSON! The requested source might be sending invalid JSON data.
${(n==null?void 0:n.message)||n}`}if(t.startsWith("text/"))try{return yield e.text()}catch(n){return`Failed to parsing TEXT ! Maybe requested sources sending invalid text data
${(n==null?void 0:n.message)||n}`}return t.startsWith("image/")||t.startsWith("audio/")||t.startsWith("video/")||t==="application/pdf"||t==="application/octet-stream"?yield e.blob():`Unknown Content-Type: ${t}. Unable to parse response.
Consider using 'proah.extra()' to handle ${t}.`});this.prettyResponse=(e,t)=>i(this,null,function*(){let n=yield this.parseData(e);return{status:e.status,statusText:e.statusText,url:e.url,[t.resultProps?t.resultProps:"data"]:e.ok?n:null,error:e.ok?null:n}})}GET_handler(e,t){return i(this,null,function*(){let n=this.normalizedReqOptions(t);return yield this.prettyResponse(yield fetch(e,n),t)})}POST_handler(e,t){return i(this,null,function*(){let n=this.normalizedReqOptions(t);return yield this.prettyResponse(yield fetch(e,n),t)})}PUT_handler(e,t){return i(this,null,function*(){let n=this.normalizedReqOptions(t);return yield this.prettyResponse(yield fetch(e,n),t)})}PATCH_handler(e,t){return i(this,null,function*(){let n=this.normalizedReqOptions(t);return yield this.prettyResponse(yield fetch(e,n),t)})}DELETE_handler(e,t){return i(this,null,function*(){let n=this.normalizedReqOptions(t);return yield this.prettyResponse(yield fetch(e,n),t)})}EXTRA_handler(e,t){let n=this.normalizedReqOptions(t);return fetch(e,n)}};export{a};
